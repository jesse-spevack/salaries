<%= content_tag(
  :div,
  tabindex: "1",
  data: {
    action: "focusout->select#hideList",
    controller: "select profile",
    select_item_value: @profile.graduation_year,
    select_item_id_value: @profile.id,
    select_attribute_value: "graduation_year",
    select_path_value: "profiles",
    select_show_class: "opacity-100",
    select_hide_class: "opacity-0",
    select_highlighted_class: "text-white",
    select_background_highlighted_class: "bg-indigo-600",
    select_not_highlighted_class: "text-gray-900",
    select_selected_item_font_class: "font-semibold",
    select_not_selected_item_font_class: "font-normal",
    select_checked_class: "text-white",
    select_unchecked_class: "text-indigo-600",
    select_hidden_class: "hidden"
  }
) do %>
  <%= content_tag(:div, class: "my-5 border-t border-gray-200") do %>
    <%= render(
      TitleDetailButtonComponent.new(
        button_action: "select#showForm",
        button_text: "Update",
        controller: "select",
        title: "Graduation Year",
        detail_target: "item",
        target: "show",
        detail: @profile.graduation_year
      )
    ) %>
    <%= content_tag(:div, data: { select_target: "form" }, class: "hidden w-full max-w-xs my-5") do %>
      <%= content_tag(:label, "Graduation Year", id: "listbox-label", class: "block text-sm font-medium text-gray-500") %>
      <%= content_tag(:div, class: "mt-1 relative") do %>
        <%= button_tag(
          type: "button",
          aria_haspopup: "listbox",
          aria_expanded: true,
          aria_labelledby: "listbox-label",
          class: "bg-white relative w-full border border-gray-300 rounded-md shadow-sm pl-3 pr-10 py-2 text-left cursor-default focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",
          data: {
            action: "select#showList",
            select_target: "select",
          }
        ) do %>
          <%= content_tag(:span, (@profile.graduation_year || "Select Graduation Year"), data: { select_target: "item" }, class: "block truncate") %>
          <%= content_tag(:span, class: "absolute inset-y-0 right-0 flex items-center pr-2 pointer-events-none") do %>
            <svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
              <path fill-rule="evenodd" d="M10 3a1 1 0 01.707.293l3 3a1 1 0 01-1.414 1.414L10 5.414 7.707 7.707a1 1 0 01-1.414-1.414l3-3A1 1 0 0110 3zm-3.707 9.293a1 1 0 011.414 0L10 14.586l2.293-2.293a1 1 0 011.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd" />
            </svg>
          <% end %>
        <% end %>

        <%= content_tag(:div, data: { select_target: "list" }, class: "opacity-0 absolute mt-1 w-full rounded-md bg-white shadow-lg") do %>
          <%= content_tag(:ul,
            tabindex: "-1",
            role: "listbox",
            aria_labelledby: "listbox-label",
            aria_activedescendant: "listbox-item-3",
            class: "max-h-60 rounded-md py-1 text-base ring-1 ring-black ring-opacity-5 overflow-auto focus:outline-none sm:text-sm"
          ) do %>
            <% Profile::VALID_GRADUATION_YEARS.each do |value| %>
              <%= content_tag(:li,
                id: "listbox-option-0",
                role: "option",
                class: "text-gray-900 cursor-default select-none relative py-2 pl-3 pr-9",
                data: {
                  action: "click->select#choose mouseenter->select#highlight mouseleave->select#unhighlight",
                  select_target: "selectItem",
                }
              ) do %>

                <%= content_tag(:span, value, data: { select_target: "value" }, clas: "font-normal block truncate") %>

                <%= content_tag(:span, class: "text-indigo-600 absolute inset-y-0 right-0 flex items-center pr-4") do %>
                  <!-- Heroicon name: check -->
                  <svg class="h-5 w-5" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                    <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                  </svg>
                <% end %>
              <% end %>
            <% end %>
          <% end %>
        <% end %>
      <% end %>
    <% end %>
  <% end %>
<% end %>
