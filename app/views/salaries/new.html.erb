<%= form_with(model: @salary, data: { controller: "validate", validate_disabled_class: "opacity-50" }, class: "space-y-8 divide-y divide-transparent") do |form| %>
  <%= content_tag(:div, class: "space-y-8 divide-y divide-transparent sm:space-y-5") do %>
    <%= content_tag(:div) do %>
      <%= render(FormHeaderComponent.new(title: "Salary", subtitle: "This information will be aggregated into the Turing Salaries Dataset.")) %>
    <% end %> 

    <%= content_tag(:div) do %>
      <%= render(TextFieldComponent.new(
        form: form,
        placeholder: "75000",
        attribute: :amount,
        validations_enabled: true,
        data: { action: "keyup->validate#validateTextIsNumeric", validate_target: "input" })
      ) %>
    <% end %> 

      <%= content_tag(:dl, class: "space-y-6 sm:space-y-5") do %>
        <%= content_tag(:div, class: "sm:grid sm:grid-cols-3 sm:gap-4 sm:items-start sm:border-t sm:border-gray-200 sm:pt-5") do %>
          <%= content_tag(:dt, "Location", class: "block text-sm font-medium text-gray-700 sm:mt-px sm:pt-2") %>
          <%= content_tag(:dd, class: "mt-1 flex text-sm text-gray-900 sm:mt-0 sm:col-span-2") do %>
            <%= content_tag(:span, class: "flex-grow") do %>
              <%= content_tag(:div, class: "w-full max-w-xs") do %>
                <%= render(SearchListComponent.new(title: "location", select_text: @salary.location&.name, collection: ["Denver", "New York City"])) %>
              <% end %>
            <% end %>
          <% end %>
        <% end %>
      <% end %>

    <%= content_tag(:div, 
      data: { 
        controller: "toggle",
        toggle_on_class:  "bg-indigo-600",
        toggle_off_class:  "bg-gray-600",
        toggle_translate_on_class:  "translate-x-5",
        toggle_translate_off_class:  "translate-x-0",
        toggle_invisible_class:  "invisible",
      }
    ) do %>

      <%= content_tag(:div, class: "pb-6") do %>
        <%= render(ToggleSwitchComponent.new(form: form, attribute: :current_salary)) %>
      <% end %> 

      <%= content_tag(:div, class: "pb-6") do %>
        <%= render(TextFieldComponent.new(form: form, attribute: :start_date, data: { controller: "flatpickr", flatpickr_date_format: "Y-m-d" })) %>
      <% end %> 

      <%= content_tag(:div, data: { toggle_target: "endDate" }) do %>
        <%= render(TextFieldComponent.new(form: form, attribute: :end_date, data: { controller: "flatpickr", flatpickr_date_format: "Y-m-d" })) %>
      <% end %> 
    <% end %> 
  <% end %> 

  <%= content_tag(:div, class: "pt-5") do %>
    <%= content_tag(:div, class: "flex justify-end") do %>
      <%= link_to(
          "Cancel",
          profile_path, 
          class: "bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"
        )
      %>
      <%= form.submit "Save", data: { validate_target: "submit" }, class: "ml-3 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500" %>
    <% end %> 
  <% end %> 
<% end %> 